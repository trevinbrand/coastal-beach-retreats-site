---
const { phone = "(918) 734-3331" } = Astro.props;
const telHref = `tel:${phone.replace(/[^0-9]/g, "")}`;

const propertyLinks = [
  { href: "/properties/heavenly-hideaway/", label: "Heavenly Hideaway" },
  { href: "/properties/sailors-delight/", label: "Sailor's Delight" },
  { href: "/properties/red-sky-nights/", label: "Red Sky Nights" },
  { href: "/properties/destin-dreams/", label: "Destin Dreams" }
];
---

<header class="hdr site-header" data-header>
  <div class="bar">

    <!-- LEFT: navigation -->
    <div class="left">
      <button class="hamburger" type="button" aria-label="Open menu" aria-expanded="false">
        ☰
      </button>

      <nav class="nav" aria-label="Primary">
        <a class="link" href="/">Home</a>

        <div class="dropdown">
          <button class="link dropbtn" type="button">Properties ▾</button>
          <div class="menu">
            {propertyLinks.map(p => (
              <a href={p.href}>{p.label}</a>
            ))}
          </div>
        </div>

        <a class="link" href="/3d-condo-tours/">3D Condo Tours</a>
        <a class="link" href="/map/">Map</a>
        <a class="link" href="/availability/">Availability</a>
        <a class="link" href="/reviews/">Reviews</a>
      </nav>
    </div>

    <!-- RIGHT: phone + quote -->
    <div class="right">
      <a class="contact" href={telHref}>{phone}</a>
      <a class="quote" href="/quote/">QUOTE / PRICING</a>
    </div>
  </div>

  <!-- MOBILE DRAWER -->
  <div class="drawer">
    <a class="dlink" href="/">Home</a>

    <details>
      <summary>Properties</summary>
      {propertyLinks.map(p => (
        <a class="dlink" href={p.href}>{p.label}</a>
      ))}
    </details>

    <a class="dlink" href="/3d-condo-tours/">3D Condo Tours</a>
    <a class="dlink" href="/map/">Map</a>
    <a class="dlink" href="/availability/">Availability</a>
    <a class="dlink" href="/reviews/">Reviews</a>
    <a class="dlink" href="/quote/">Quote / Pricing</a>
  </div>

  <script is:inline>
    const header = document.querySelector("[data-header]");
    const btn = header.querySelector(".hamburger");
    const drawer = header.querySelector(".drawer");

    btn.addEventListener("click", () => {
      drawer.classList.toggle("open");
      btn.textContent = drawer.classList.contains("open") ? "✕" : "☰";
    });

    window.addEventListener("scroll", () => {
      header.classList.toggle("is-scrolled", window.scrollY > 10);
    });
  </script>

  <style>
    /* ===== BASE HEADER ===== */
    .hdr {
      position: sticky;
      top: 0;
      z-index: 999;
      background: #fff;
      border-bottom: 1px solid rgba(0,0,0,.1);
      font-family: "Quicksand", system-ui, sans-serif;
      color: #193e7f;
    }

    .hdr.is-scrolled {
      background: rgba(255,255,255,.8);
      backdrop-filter: blur(10px);
    }

    .bar {
          max-width: 1120px;
          margin: 0 auto;
          padding: 18px 12px; /* ⬅️ reduced side padding by ~40% */
          display: flex;
          align-items: center;
          justify-content: space-between;
        }


    /* ===== LEFT ===== */
    .left {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .nav {
      display: flex;
      gap: 14px;
      align-items: center;
    }

    .link {
      text-decoration: none;
      padding: 12px 14px;
      border-radius: 12px;
      font-weight: 600;
      color: #193e7f;
    }

    .link:hover {
      background: rgba(0,0,0,.05);
    }

    /* ===== DROPDOWN ===== */
    .dropdown { position: relative; }
    .dropbtn {
      background: none;
      border: 0;
      font: inherit;
      cursor: pointer;
    }

    .menu {
      display: none;
      position: absolute;
      top: calc(100% + 10px);
      left: 0;
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 12px 28px rgba(0,0,0,.12);
      padding: 8px;
      min-width: 220px;
    }

    .menu a {
      display: block;
      padding: 10px 12px;
      text-decoration: none;
      border-radius: 10px;
      color: #193e7f;
    }

    .menu a:hover {
      background: rgba(0,0,0,.05);
    }

    .dropdown:hover .menu {
      display: block;
    }

    /* ===== RIGHT ===== */
    .right {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .contact {
      font-weight: 600;
      text-decoration: underline;
      color: #193e7f;
    }

    .quote {
      padding: 14px 18px;
      border-radius: 16px;
      border: 2px solid #193e7f;
      font-weight: 700;
      text-decoration: none;
      color: #193e7f;
      transition: all .2s ease;
    }

    .quote:hover {
      background: #193e7f;
      color: #fff;
    }

    /* ===== HAMBURGER ===== */
    .hamburger {
      display: none;
      width: 56px;
      height: 56px;
      font-size: 28px;
      border-radius: 14px;
      border: 2px solid rgba(25,62,127,.3);
      background: rgba(0,0,0,.05);
      cursor: pointer;
    }

    /* ===== MOBILE ===== */
    .drawer {
      display: none;
      padding: 16px 20px;
      background: #fff;
      border-top: 1px solid rgba(0,0,0,.1);
    }

    .drawer.open {
      display: block;
    }

    .dlink {
      display: block;
      padding: 12px 6px;
      font-weight: 600;
      text-decoration: none;
      color: #193e7f;
    }

    @media (max-width: 1100px) {
      .nav { display: none; }
      .hamburger { display: inline-flex; align-items: center; justify-content: center; }
      .contact { display: none; }
    }
  </style>
</header>
